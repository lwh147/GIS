function index_body_chart_init(){loadSidebar();registListenerForSidebar();loadChartIndex()}function loadSidebar(){if(!isLoaded("index-body-sidebar")){$.ajax({url:"index_body_sidebar",type:"get",async:false,dataType:"html",success:function(a){$("#index-body-chart").append(a);initSidebar()},error:function(a){alert("----ajax请求加载侧边栏执行出错！错误信息如下：----\n"+a.responseText)}})}}function loadChartIndex(){$.each(chart_components,function(a,b){loadSingleComponent(b,"#index-body-chart #index-body-chart-container")})}function chart_chAndChl_init(){chart_chAndChl_generate();$("#chart-chAndChl .nav-pills .dropdown-menu li a").click(function(){let clickedItemValue=$(this).text();let clickedBtn=$(this).parent().parent().prev().children();let preAttrValue=$(clickedBtn[1]).text();if(preAttrValue!==clickedItemValue){$(clickedBtn[1]).text(clickedItemValue);let newDOY=$("#chart-chAndChl .nav-pills .dropdown button span:eq(1)").text();let newTRT=$("#chart-chAndChl .nav-pills .dropdown button span:eq(4)").text();chart_chAndChl_generate(newDOY,newTRT)}})}function chart_chAndChl_generate(b,c){b=b||"177";c=c||"1";let chartData=getChartData("corn/cornHeightAndChloDOY",JSON.stringify({DOY:b}),1);let screenChartData=screenDataByAttr(chartData,"tRT",c);let xAxisData=extractCol(screenDataByAttr(screenChartData,"nUM_1",c+".1"),"nUM_3");let partData1=screenDataByAttr(screenChartData,"nUM_1",c+".1");let partData2=screenDataByAttr(screenChartData,"nUM_1",c+".2");let partData3=screenDataByAttr(screenChartData,"nUM_1",c+".3");let partOption1={legend:{},tooltip:{},xAxis:{type:"category",data:xAxisData,axisLabel:{formatter:"第{value}次"}},yAxis:{},series:[{type:"line",name:"Height",data:extractCol(partData1,"height")},{type:"line",name:"Chlorophyll",data:extractCol(partData1,"chlorophyll")}]};let partOption2={legend:{},tooltip:{},xAxis:{type:"category",data:xAxisData,axisLabel:{formatter:"第{value}次"}},yAxis:{},series:[{type:"line",name:"Height",data:extractCol(partData2,"height")},{type:"line",name:"Chlorophyll",data:extractCol(partData2,"chlorophyll")}]};let partOption3={legend:{},tooltip:{},xAxis:{type:"category",data:xAxisData,axisLabel:{formatter:"第{value}次"}},yAxis:{},series:[{type:"line",name:"Height",data:extractCol(partData3,"height")},{type:"line",name:"Chlorophyll",data:extractCol(partData3,"chlorophyll")}]};let cornHandChChart1=getAndInitChart("chart-chAndChl-1");let cornHandChChart2=getAndInitChart("chart-chAndChl-2");let cornHandChChart3=getAndInitChart("chart-chAndChl-3");cornHandChChart1.setOption(partOption1);cornHandChChart2.setOption(partOption2);cornHandChChart3.setOption(partOption3);function a(){cornHandChChart1.resize();cornHandChChart2.resize();cornHandChChart3.resize()}addSidebarClickEventHandlerFunction(a)}function chart_lam_init(){chart_lam_generate();$("#chart-lam .nav-pills .dropdown-menu li a").click(function(){let clickedItemValue=$(this).text();let clickedBtn=$(this).parent().parent().prev().children();let preAttrValue=$(clickedBtn[1]).text();if(preAttrValue!==clickedItemValue){$(clickedBtn[1]).text(clickedItemValue);chart_lam_generate(clickedItemValue)}})}function chart_lam_generate(b){b=b||"177";let chartData=getChartData("corn/cornLeafDOY",JSON.stringify({DOY:b}),1);let chartOption={legend:{},tooltip:{},dataset:{source:chartData},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"LeafPerimeter",encode:{x:5,y:3}},{type:"line",name:"LeafArea",encode:{x:5,y:1}},{type:"line",name:"LeafNumber",encode:{x:5,y:2}}]};let chart=getAndInitChart("chart-lam-1");chart.setOption(chartOption);function a(){chart.resize()}addSidebarClickEventHandlerFunction(a)}function chart_yield_init(){chart_yield_generate()}function chart_yield_generate(){let chartData=getChartData("corn/cornYield",null,0);let chartOption={legend:{},tooltip:{},dataset:{source:chartData},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"产量（湿重）kg/hm2",encode:{x:3,y:6}},{type:"line",name:"产量（干重）kg/hm2",encode:{x:3,y:4}}]};let chart=getAndInitChart("chart-yield-1");chart.setOption(chartOption);function a(){chart.resize()}addSidebarClickEventHandlerFunction(a);let html="<table class='table table-hover'><thead><tr><th>编号</th><th>产量（湿重）kg/hm2</th><th>盒重g</th><th>湿重g</th><th>干重g</th><th>含水率</th><th>产量（干重）kg/hm2</th></tr></thead><tbody>";$.each(chartData,function(b,c){html+="<tr><th scope='row'>"+c.cornFieldId+"</th><td>"+c.moistureContent+"</td><td>"+c.boxWeight+"</td><td>"+c.beforeDehydration+"</td><td>"+c.afterDehydration+"</td><td>"+c.moistureContent+"</td><td>"+c.dryYield+"</td></tr>"});html+="</tbody></table>";$("#chart-yield-2").append(html)}function chart_vwc_init(){chart_vwc_generate();$("#chart-vwc .nav-pills .dropdown-menu li a").click(function(){let clickedItemValue=$(this).text();let clickedBtn=$(this).parent().parent().prev().children();let preAttrValue=$(clickedBtn[1]).text();if(preAttrValue!==clickedItemValue){$(clickedBtn[1]).text(clickedItemValue);chart_vwc_generate(clickedItemValue)}})}function chart_vwc_generate(b){b=b||"1";let chartData=getChartData("field/fwh",null,0);let plotData=screenDataByAttr(chartData,"tRT",b);let plot1Data=screenDataByAttr(plotData,"nUM_1",b+"-1");let plot2Data=screenDataByAttr(plotData,"nUM_1",b+"-2");let plot3Data=screenDataByAttr(plotData,"nUM_1",b+"-3");let chartOption1={legend:{},tooltip:{},dataset:{source:plot1Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"ContentWeight",encode:{x:3,y:0}},{type:"line",name:"massWaterContent",encode:{x:3,y:1}},{type:"line",name:"volumeWaterContent",encode:{x:3,y:5}}]};let chartOption2={legend:{},tooltip:{},dataset:{source:plot2Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"ContentWeight",encode:{x:3,y:0}},{type:"line",name:"massWaterContent",encode:{x:3,y:1}},{type:"line",name:"volumeWaterContent",encode:{x:3,y:5}}]};let chartOption3={legend:{},tooltip:{},dataset:{source:plot3Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"ContentWeight",encode:{x:3,y:0}},{type:"line",name:"massWaterContent",encode:{x:3,y:1}},{type:"line",name:"volumeWaterContent",encode:{x:3,y:5}}]};let chart1=getAndInitChart("chart-vwc-1");let chart2=getAndInitChart("chart-vwc-2");let chart3=getAndInitChart("chart-vwc-3");chart1.setOption(chartOption1);chart2.setOption(chartOption2);chart3.setOption(chartOption3);function a(){chart1.resize();chart2.resize();chart3.resize()}addSidebarClickEventHandlerFunction(a)}function chart_lai_init(){chart_lai_generate();$("#chart-lai .nav-pills .dropdown-menu li a").click(function(){let clickedItemValue=$(this).text();let clickedBtn=$(this).parent().parent().prev().children();let preAttrValue=$(clickedBtn[1]).text();if(preAttrValue!==clickedItemValue){$(clickedBtn[1]).text(clickedItemValue);let newDOY=$("#chart-lai .nav-pills .dropdown button span:eq(1)").text();let newTRT=$("#chart-lai .nav-pills .dropdown button span:eq(4)").text();chart_lai_generate(newDOY,newTRT)}})}function chart_lai_generate(b,c){b=b||"177";c=c||"1";let chartData=getChartData("corn/cornLAIDOY",JSON.stringify({DOY:b}),1);let plotData=screenDataByAttr(chartData,"tRT",c);let plot1Data=screenDataByAttr(plotData,"nUM_1",c+"-1");let plot2Data=screenDataByAttr(plotData,"nUM_1",c+"-2");let plot3Data=screenDataByAttr(plotData,"nUM_1",c+"-3");let chartOption1={legend:{},tooltip:{},dataset:{source:plot1Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"LAI",encode:{x:4,y:1}}]};let chartOption2={legend:{},tooltip:{},dataset:{source:plot2Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"LAI",encode:{x:4,y:1}}]};let chartOption3={legend:{},tooltip:{},dataset:{source:plot3Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"LAI",encode:{x:4,y:1}}]};let chart1=getAndInitChart("chart-lai-1");let chart2=getAndInitChart("chart-lai-2");let chart3=getAndInitChart("chart-lai-3");chart1.setOption(chartOption1);chart2.setOption(chartOption2);chart3.setOption(chartOption3);function a(){chart1.resize();chart2.resize();chart3.resize()}addSidebarClickEventHandlerFunction(a)}function chart_preAndIrr_init(){chart_preAndIrr_generate();$("#chart-preAndIrr .nav-pills .dropdown-menu li a").click(function(){let clickedItemValue=$(this).text();let clickedBtn=$(this).parent().parent().prev().children();let preAttrValue=$(clickedBtn[1]).text();if(preAttrValue!==clickedItemValue){$(clickedBtn[1]).text(clickedItemValue);let newTRT=$("#chart-preAndIrr .nav-pills .dropdown button span:eq(1)").text();chart_preAndIrr_generate(newTRT)}})}function chart_preAndIrr_generate(b){b=b||"1";let chartData=getChartData("climatic/fieldpai",null,0);let plotData=screenDataByAttr(chartData,"tRT",b);$.each(plotData,function(c,d){d.recordDate=timestampToTime(d.recordDate).split(" ")[0]});let chartOption={legend:{},tooltip:{},dataset:{source:plotData},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"Precipitation",encode:{x:3,y:2}},{type:"line",name:"Irrigation",encode:{x:3,y:1}}]};let chart=getAndInitChart("chart-preAndIrr-1");chart.setOption(chartOption);function a(){chart.resize()}addSidebarClickEventHandlerFunction(a)}function chart_swc_init(){chart_swc_generate();$("#chart-swc .nav-pills .dropdown-menu li a").click(function(){let clickedItemValue=$(this).text();let clickedBtn=$(this).parent().parent().prev().children();let preAttrValue=$(clickedBtn[1]).text();if(preAttrValue!==clickedItemValue){$(clickedBtn[1]).text(clickedItemValue);let newDOY=$("#chart-swc .nav-pills .dropdown button span:eq(1)").text();let newTRT=$("#chart-swc .nav-pills .dropdown button span:eq(4)").text();chart_swc_generate(newDOY,newTRT)}})}function chart_swc_generate(b,c){b=b||"177";c=c||"1";let chartData=getChartData("field/swc",null,0);let plotData=screenDataByAttr(chartData,"dOY",b);let plot1Data=screenDataByAttr(plotData,"nUM_1",c+"-1");let plot2Data=screenDataByAttr(plotData,"nUM_1",c+"-2");let plot3Data=screenDataByAttr(plotData,"nUM_1",c+"-3");let chartOption1={legend:{},tooltip:{},dataset:{source:plot1Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"SWC",encode:{x:6,y:8}}]};let chartOption2={legend:{},tooltip:{},dataset:{source:plot2Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"SWC",encode:{x:6,y:8}}]};let chartOption3={legend:{},tooltip:{},dataset:{source:plot3Data},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"SWC",encode:{x:6,y:8}}]};let chart1=getAndInitChart("chart-swc-1");let chart2=getAndInitChart("chart-swc-2");let chart3=getAndInitChart("chart-swc-3");chart1.setOption(chartOption1);chart2.setOption(chartOption2);chart3.setOption(chartOption3);function a(){chart1.resize();chart2.resize();chart3.resize()}addSidebarClickEventHandlerFunction(a)}function chart_sws_init(){chart_sws_generate();$("#chart-sws .nav-pills .dropdown-menu li a").click(function(){let clickedItemValue=$(this).text();let clickedBtn=$(this).parent().parent().prev().children();let preAttrValue=$(clickedBtn[1]).text();if(preAttrValue!==clickedItemValue){$(clickedBtn[1]).text(clickedItemValue);let newDate=$("#chart-sws .nav-pills .dropdown button span:eq(1)").text();chart_sws_generate(newDate)}})}function chart_sws_generate(a){a=a||"2018-06-23";let chartData=getChartData("climatic/station",null,0);let plotData=[];$.each(chartData,function(c,d){d.recordDate=timestampToTime(d.recordDate);if(d.recordDate.split(" ")[0]===a){plotData.push(d)}});let chartOption={legend:{},tooltip:{},dataset:{source:plotData},xAxis:{type:"category"},yAxis:{},series:[{type:"line",name:"AirTemperature",encode:{x:5,y:1}},{type:"line",name:"AirHummidity",encode:{x:5,y:0}},{type:"line",name:"WindSpeed",encode:{x:5,y:6}},{type:"line",name:"RainFall",encode:{x:5,y:4}},{type:"line",name:"RadiationAmount",encode:{x:5,y:3}}]};let chart=getAndInitChart("chart-sws-1");chart.setOption(chartOption);function b(){chart.resize()}addSidebarClickEventHandlerFunction(b)}function chart_sr_init(){chart_sr_generate()}function chart_sr_generate(){}function getChartData(c,a,b){b=b||1;let chartData=null;if(c!=null){function d(e){if(e==="0"){alert("获取图表数据失败")}else{chartData=e}}if(b===1){$.ajax({url:c,type:"post",data:a,async:false,contentType:"application/json;charset=UTF-8",dataType:"json",success:d,error:function(e){alert("----ajax请求获取图表数据失败！错误信息如下：----\n"+e.responseText)}})}else{if(b===0){$.ajax({url:c,type:"get",async:false,dataType:"json",success:d,error:function(e){alert("----ajax请求获取图表数据失败！错误信息如下：----\n"+e.responseText)}})}else{alert("图表数据请求类型出错")}}}else{alert("图表数据请求url不能为空")}return chartData};